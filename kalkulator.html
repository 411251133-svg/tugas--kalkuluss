<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator - Kalkulus Pro</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <h1>Kalkulus<span class="gradient-text">Pro</span></h1>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html">Beranda</a></li>
                <li><a href="materi.html">Materi</a></li>
                <li><a href="latihan.html">Latihan</a></li>
                <li><a href="kalkulator.html" class="active">Kalkulator</a></li>
                <li><a href="tim.html">Tim</a></li>
            </ul>
        </div>
    </nav>

    <div class="page-header">
        <h1 class="gradient-text">Kalkulator Kalkulus</h1>
        <p>Hitung berbagai rumus kalkulus dengan mudah</p>
    </div>

    <div class="container">
        <div class="calculator-container">
            <input type="radio" name="calc-tab" id="calc-pertidaksamaan" checked>
            <input type="radio" name="calc-tab" id="calc-gradien">
            <input type="radio" name="calc-tab" id="calc-grafik">
            <input type="radio" name="calc-tab" id="calc-rasional">
            <input type="radio" name="calc-tab" id="calc-komposisi">
            <input type="radio" name="calc-tab" id="calc-kekontinuan">
            <input type="radio" name="calc-tab" id="calc-limit">
            <input type="radio" name="calc-tab" id="calc-turunan">
            <input type="radio" name="calc-tab" id="calc-ekstrim">
            <input type="radio" name="calc-tab" id="calc-integral">

            <div class="calc-tabs">
                <label for="calc-pertidaksamaan" class="calc-tab">Pertidaksamaan</label>
                <label for="calc-gradien" class="calc-tab">Gradien</label>
                <label for="calc-grafik" class="calc-tab">Grafik</label>
                <label for="calc-rasional" class="calc-tab">Rasional</label>
                <label for="calc-komposisi" class="calc-tab">Komposisi</label>
                <label for="calc-kekontinuan" class="calc-tab">Kekontinuan</label>
                <label for="calc-limit" class="calc-tab">Limit</label>
                <label for="calc-turunan" class="calc-tab">Turunan</label>
                <label for="calc-ekstrim" class="calc-tab">Ekstrim</label>
                <label for="calc-integral" class="calc-tab">Integral</label>
            </div>

            <div class="calc-content">
                <div class="calc-section" id="calc-content-pertidaksamaan">
                    <h2 class="gradient-text">Kalkulator Pertidaksamaan Linear</h2>
                    <div class="calc-card">
                        <h3>Selesaikan: ax + b &lt; c</h3>
                        <div class="calc-form">
                            <div class="input-group">
                                <label>Koefisien a:</label>
                                <input type="number" id="pert-a" value="3">
                            </div>
                            <div class="input-group">
                                <label>Konstanta b:</label>
                                <input type="number" id="pert-b" value="5">
                            </div>
                            <div class="input-group">
                                <label>Nilai c:</label>
                                <input type="number" id="pert-c" value="17">
                            </div>
                        </div>
                        <div class="calc-result">
                            <h4>Penyelesaian:</h4>
                            <div id="result-pertidaksamaan" class="result-box">
                                <p class="formula-display">3x + 5 &lt; 17</p>
                                <p class="formula-display">3x &lt; 12</p>
                                <p class="formula-display">x &lt; 4</p>
                                <p class="answer-highlight">Himpunan Penyelesaian: x &lt; 4</p>
                            </div>
                        </div>
                        
                    </div>
                </div>

                <div class="calc-section" id="calc-content-gradien">
                    <h2 class="gradient-text">Kalkulator Gradien</h2>
                    <div class="calc-card">
                        <h3>Gradien Melalui Dua Titik</h3>
                        <div class="calc-form">
                            <div class="input-group">
                                <label>x₁:</label>
                                <input type="number" id="grad-x1" value="2">
                            </div>
                            <div class="input-group">
                                <label>y₁:</label>
                                <input type="number" id="grad-y1" value="3">
                            </div>
                            <div class="input-group">
                                <label>x₂:</label>
                                <input type="number" id="grad-x2" value="5">
                            </div>
                            <div class="input-group">
                                <label>y₂:</label>
                                <input type="number" id="grad-y2" value="9">
                            </div>
                        </div>
                        <div class="calc-result">
                            <h4>Hasil:</h4>
                            <div id="result-gradien" class="result-box">
                                <p class="formula-display">m = (y₂ - y₁) / (x₂ - x₁)</p>
                                <p class="formula-display">m = (9 - 3) / (5 - 2)</p>
                                <p class="formula-display">m = 6 / 3</p>
                                <p class="answer-highlight">Gradien m = 2</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="calc-section" id="calc-content-grafik">
                    <h2 class="gradient-text">Kalkulator Fungsi Kuadrat</h2>
                    <div class="calc-card">
                        <h3>Analisis y = ax² + bx + c</h3>
                        <div class="calc-form">
                            <div class="input-group">
                                <label>Koefisien a:</label>
                                <input type="number" id="graf-a" value="1" step="0.1">
                            </div>
                            <div class="input-group">
                                <label>Koefisien b:</label>
                                <input type="number" id="graf-b" value="-4" step="0.1">
                            </div>
                            <div class="input-group">
                                <label>Konstanta c:</label>
                                <input type="number" id="graf-c" value="3" step="0.1">
                            </div>
                        </div>
                        <div class="calc-result">
                            <h4>Hasil Analisis:</h4>
                            <div id="result-grafik" class="result-box">
                                <p class="formula-display">Fungsi: y = x² - 4x + 3</p>
                                <p>Titik Puncak x = -b/(2a) = 4/2 = 2</p>
                                <p>Titik Puncak y = 1(2²) - 4(2) + 3 = -1</p>
                                <p class="answer-highlight">Puncak: (2, -1)</p>
                                <p>Sumbu Simetri: x = 2</p>
                                <p>Titik Potong Sumbu Y: (0, 3)</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="calc-section" id="calc-content-rasional">
                    <h2 class="gradient-text">Kalkulator Fungsi Rasional</h2>
                    <div class="calc-card">
                        <h3>Analisis f(x) = (ax + b)/(cx + d)</h3>
                        <div class="calc-form">
                            <div class="input-group">
                                <label>Pembilang a:</label>
                                <input type="number" id="ras-a" value="2">
                            </div>
                            <div class="input-group">
                                <label>Pembilang b:</label>
                                <input type="number" id="ras-b" value="1">
                            </div>
                            <div class="input-group">
                                <label>Penyebut c:</label>
                                <input type="number" id="ras-c" value="1">
                            </div>
                            <div class="input-group">
                                <label>Penyebut d:</label>
                                <input type="number" id="ras-d" value="-3">
                            </div>
                        </div>
                        <div class="calc-result">
                            <h4>Hasil:</h4>
                            <div id="result-rasional" class="result-box">
                                <p class="formula-display">f(x) = (2x + 1) / (x - 3)</p>
                                <p>Domain: x ≠ 3</p>
                                <p>Asimtot Vertikal: x = 3</p>
                                <p>Asimtot Horizontal: y = a/c = 2/1 = 2</p>
                                <p class="answer-highlight">AV: x = 3, AH: y = 2</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="calc-section" id="calc-content-komposisi">
                    <h2 class="gradient-text">Kalkulator Komposisi Fungsi</h2>
                    <div class="calc-card">
                        <h3>(f ∘ g)(x) untuk f(x) = ax + b dan g(x) = cx + d</h3>
                        <div class="calc-form">
                            <div class="input-group">
                                <label>f(x): a =</label>
                                <input type="number" id="komp-a" value="2">
                            </div>
                            <div class="input-group">
                                <label>f(x): b =</label>
                                <input type="number" id="komp-b" value="1">
                            </div>
                            <div class="input-group">
                                <label>g(x): c =</label>
                                <input type="number" id="komp-c" value="3">
                            </div>
                            <div class="input-group">
                                <label>g(x): d =</label>
                                <input type="number" id="komp-d" value="-2">
                            </div>
                        </div>
                        <div class="calc-result">
                            <h4>Hasil:</h4>
                            <div id="result-komposisi" class="result-box">
                                <p>f(x) = 2x + 1</p>
                                <p>g(x) = 3x - 2</p>
                                <p class="formula-display">(f ∘ g)(x) = f(g(x))</p>
                                <p>= f(3x - 2)</p>
                                <p>= 2(3x - 2) + 1</p>
                                <p>= 6x - 4 + 1</p>
                                <p class="answer-highlight">(f ∘ g)(x) = 6x - 3</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="calc-section" id="calc-content-kekontinuan">
                    <h2 class="gradient-text">Kalkulator Kekontinuan</h2>
                    <div class="calc-card">
                        <h3>Cek Kekontinuan f(x) = ax² + bx + c di x = k</h3>
                        <div class="calc-form">
                            <div class="input-group">
                                <label>Koefisien a:</label>
                                <input type="number" id="kont-a" value="1">
                            </div>
                            <div class="input-group">
                                <label>Koefisien b:</label>
                                <input type="number" id="kont-b" value="2">
                            </div>
                            <div class="input-group">
                                <label>Konstanta c:</label>
                                <input type="number" id="kont-c" value="3">
                            </div>
                            <div class="input-group">
                                <label>Nilai x = k:</label>
                                <input type="number" id="kont-k" value="2">
                            </div>
                        </div>
                        <div class="calc-result">
                            <h4>Analisis:</h4>
                            <div id="result-kekontinuan" class="result-box">
                                <p class="formula-display">f(x) = x² + 2x + 3</p>
                                <p>1. f(2) = 1(4) + 2(2) + 3 = 11 ✓</p>
                                <p>2. lim(x→2) f(x) = 11 ✓</p>
                                <p>3. lim(x→2) f(x) = f(2) ✓</p>
                                <p class="answer-highlight">Fungsi KONTINU di x = 2</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="calc-section" id="calc-content-limit">
                    <h2 class="gradient-text">Kalkulator Limit</h2>
                    <div class="calc-card">
                        <h3>lim(x→a) (ax² + bx + c)</h3>
                        <div class="calc-form">
                            <div class="input-group">
                                <label>Koefisien a:</label>
                                <input type="number" id="lim-a" value="1">
                            </div>
                            <div class="input-group">
                                <label>Koefisien b:</label>
                                <input type="number" id="lim-b" value="2">
                            </div>
                            <div class="input-group">
                                <label>Konstanta c:</label>
                                <input type="number" id="lim-c" value="-1">
                            </div>
                            <div class="input-group">
                                <label>x mendekati:</label>
                                <input type="number" id="lim-x" value="3">
                            </div>
                        </div>
                        <div class="calc-result">
                            <h4>Hasil:</h4>
                            <div id="result-limit" class="result-box">
                                <p class="formula-display">lim(x→3) (x² + 2x - 1)</p>
                                <p>Substitusi langsung:</p>
                                <p>= (3)² + 2(3) - 1</p>
                                <p>= 9 + 6 - 1</p>
                                <p class="answer-highlight">Limit = 14</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="calc-section" id="calc-content-turunan">
                    <h2 class="gradient-text">Kalkulator Turunan</h2>
                    <div class="calc-card">
                        <h3>Turunan f(x) = ax³ + bx² + cx + d</h3>
                        <div class="calc-form">
                            <div class="input-group">
                                <label>Koefisien a:</label>
                                <input type="number" id="tur-a" value="3">
                            </div>
                            <div class="input-group">
                                <label>Koefisien b:</label>
                                <input type="number" id="tur-b" value="-2">
                            </div>
                            <div class="input-group">
                                <label>Koefisien c:</label>
                                <input type="number" id="tur-c" value="5">
                            </div>
                            <div class="input-group">
                                <label>Konstanta d:</label>
                                <input type="number" id="tur-d" value="-1">
                            </div>
                        </div>
                        <div class="calc-result">
                            <h4>Hasil:</h4>
                            <div id="result-turunan" class="result-box">
                                <p class="formula-display">f(x) = 3x³ - 2x² + 5x - 1</p>
                                <p>f'(x) = 3(3x²) - 2(2x) + 5(1) - 0</p>
                                <p class="answer-highlight">f'(x) = 9x² - 4x + 5</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="calc-section" id="calc-content-ekstrim">
                    <h2 class="gradient-text">Kalkulator Titik Ekstrim</h2>
                    <div class="calc-card">
                        <h3>Titik Ekstrim f(x) = ax² + bx + c</h3>
                        <div class="calc-form">
                            <div class="input-group">
                                <label>Koefisien a:</label>
                                <input type="number" id="eks-a" value="1">
                            </div>
                            <div class="input-group">
                                <label>Koefisien b:</label>
                                <input type="number" id="eks-b" value="-4">
                            </div>
                            <div class="input-group">
                                <label>Konstanta c:</label>
                                <input type="number" id="eks-c" value="3">
                            </div>
                        </div>
                        <div class="calc-result">
                            <h4>Hasil:</h4>
                            <div id="result-ekstrim" class="result-box">
                                <p class="formula-display">f(x) = x² - 4x + 3</p>
                                <p>f'(x) = 2x - 4 = 0</p>
                                <p>x = 2</p>
                                <p>f(2) = (2)² - 4(2) + 3 = -1</p>
                                <p>f''(x) = 2 &gt; 0 (minimum)</p>
                                <p class="answer-highlight">Minimum di (2, -1)</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="calc-section" id="calc-content-integral">
                    <h2 class="gradient-text">Kalkulator Integral</h2>
                    <div class="calc-card">
                        <h3>∫ (ax² + bx + c) dx</h3>
                        <div class="calc-form">
                            <div class="input-group">
                                <label>Koefisien a:</label>
                                <input type="number" id="int-a" value="3">
                            </div>
                            <div class="input-group">
                                <label>Koefisien b:</label>
                                <input type="number" id="int-b" value="2">
                            </div>
                            <div class="input-group">
                                <label>Konstanta c:</label>
                                <input type="number" id="int-c" value="-1">
                            </div>
                        </div>
                        <div class="calc-result">
                            <h4>Hasil:</h4>
                            <div id="result-integral-indef" class="result-box">
                                <p class="formula-display">∫ (3x² + 2x - 1) dx</p>
                                <p>= 3(x³/3) + 2(x²/2) - x + C</p>
                                <p class="answer-highlight">= x³ + x² - x + C</p>
                            </div>
                        </div>
                    </div>

                    <div class="calc-card">
                        <h3>Integral Tentu ∫ₐᵇ (px² + qx + r) dx</h3>
                        <div class="calc-form">
                            <div class="input-group">
                                <label>Koefisien p:</label>
                                <input type="number" id="int-p" value="2">
                            </div>
                            <div class="input-group">
                                <label>Koefisien q:</label>
                                <input type="number" id="int-q" value="1">
                            </div>
                            <div class="input-group">
                                <label>Konstanta r:</label>
                                <input type="number" id="int-r" value="0">
                            </div>
                            <div class="input-group">
                                <label>Batas bawah a:</label>
                                <input type="number" id="int-lower" value="0">
                            </div>
                            <div class="input-group">
                                <label>Batas atas b:</label>
                                <input type="number" id="int-upper" value="2">
                            </div>
                        </div>
                        <div class="calc-result">
                            <h4>Hasil:</h4>
                            <div id="result-integral-def" class="result-box">
                                <p class="formula-display">∫₀² (2x² + x) dx</p>
                                <p>= [2x³/3 + x²/2]₀²</p>
                                <p>= (16/3 + 2) - (0)</p>
                                <p>= 16/3 + 6/3 = 22/3</p>
                                <p class="answer-highlight">≈ 7.33 satuan luas</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Kalkulus Pro. Platform Pembelajaran Kalkulus Modern.</p>
        </div>
    </footer>
    <script>
        // Helper to format numbers prettily
        function fmt(n) {
            if (!isFinite(n)) return String(n);
            if (Number.isInteger(n)) return String(n);
            return Number.parseFloat(n).toFixed(6).replace(/\.0+$/, '');
        }

        // ------- calculators implemented as functions -------
        function calcPertidaksamaan() {
            const a = Number(document.getElementById('pert-a').value);
            const b = Number(document.getElementById('pert-b').value);
            const c = Number(document.getElementById('pert-c').value);
            const out = document.getElementById('result-pertidaksamaan');
            if (Number.isNaN(a) || Number.isNaN(b) || Number.isNaN(c)) return;

            if (a === 0) {
                if (b < c) out.innerHTML = `<p class="answer-highlight">Semua real (a=0 dan ${b} &lt; ${c})</p>`;
                else out.innerHTML = `<p class="answer-highlight">Tidak ada penyelesaian (a=0 dan ${b} ≥ ${c})</p>`;
                return;
            }

            const bound = (c - b) / a;
            if (a > 0) {
                out.innerHTML = `
                    <p class="formula-display">${a}x + ${b} &lt; ${c}</p>
                    <p class="formula-display">${a}x &lt; ${c - b}</p>
                    <p class="formula-display">x &lt; ${fmt(bound)}</p>
                    <p class="answer-highlight">Himpunan Penyelesaian: x &lt; ${fmt(bound)}</p>
                `;
            } else {
                out.innerHTML = `
                    <p class="formula-display">${a}x + ${b} &lt; ${c}</p>
                    <p class="formula-display">${a}x &lt; ${c - b}</p>
                    <p class="formula-display">x &gt; ${fmt(bound)}</p>
                    <p class="answer-highlight">Himpunan Penyelesaian: x &gt; ${fmt(bound)}</p>
                `;
            }
        }

        function calcGradien() {
            const x1 = Number(document.getElementById('grad-x1').value);
            const y1 = Number(document.getElementById('grad-y1').value);
            const x2 = Number(document.getElementById('grad-x2').value);
            const y2 = Number(document.getElementById('grad-y2').value);
            const out = document.getElementById('result-gradien');
            if (Number.isNaN(x1) || Number.isNaN(y1) || Number.isNaN(x2) || Number.isNaN(y2)) return;

            if (x2 === x1) {
                out.innerHTML = `<p class="answer-highlight">Gradien tidak terdefinisi (garis vertikal, x₁ = x₂ = ${fmt(x1)})</p>`;
                return;
            }
            const m = (y2 - y1) / (x2 - x1);
            out.innerHTML = `
                <p class="formula-display">m = (y₂ - y₁) / (x₂ - x₁)</p>
                <p class="formula-display">m = (${fmt(y2)} - ${fmt(y1)}) / (${fmt(x2)} - ${fmt(x1)})</p>
                <p class="answer-highlight">Gradien m = ${fmt(m)}</p>
            `;
        }

        function calcGrafik() {
            const a = Number(document.getElementById('graf-a').value);
            const b = Number(document.getElementById('graf-b').value);
            const c = Number(document.getElementById('graf-c').value);
            const out = document.getElementById('result-grafik');
            if (Number.isNaN(a) || Number.isNaN(b) || Number.isNaN(c)) return;

            if (a === 0) {
                const y0 = b * 0 + c;
                out.innerHTML = `<p class="answer-highlight">Bukan fungsi kuadrat (a = 0). Fungsi linear: y = ${fmt(b)}x + ${fmt(c)}; Titik potong y: (0, ${fmt(y0)})</p>`;
                return;
            }
            const xv = -b / (2 * a);
            const yv = a * xv * xv + b * xv + c;
            const disc = b * b - 4 * a * c;
            let roots = '';
            if (disc > 0) {
                const r1 = (-b + Math.sqrt(disc)) / (2 * a);
                const r2 = (-b - Math.sqrt(disc)) / (2 * a);
                roots = `Titik potong sumbu X: (${fmt(r1)}, 0) dan (${fmt(r2)}, 0)`;
            } else if (disc === 0) {
                const r = -b / (2 * a);
                roots = `Titik potong sumbu X: (${fmt(r)}, 0) (kembar)`;
            } else roots = 'Tidak ada titik potong riil dengan sumbu X (diskriminan < 0).';

            out.innerHTML = `
                <p class="formula-display">Fungsi: y = ${fmt(a)}x² + ${fmt(b)}x + ${fmt(c)}</p>
                <p>Puncak: (${fmt(xv)}, ${fmt(yv)})</p>
                <p>Sumbu Simetri: x = ${fmt(xv)}</p>
                <p>Titik Potong Sumbu Y: (0, ${fmt(c)})</p>
                <p>${roots}</p>
                <p class="answer-highlight">Puncak: (${fmt(xv)}, ${fmt(yv)})</p>
            `;
        }

        function calcRasional() {
            const a = Number(document.getElementById('ras-a').value);
            const b = Number(document.getElementById('ras-b').value);
            const c = Number(document.getElementById('ras-c').value);
            const d = Number(document.getElementById('ras-d').value);
            const out = document.getElementById('result-rasional');
            if (Number.isNaN(a) || Number.isNaN(b) || Number.isNaN(c) || Number.isNaN(d)) return;

            let domainNote = '';
            if (c === 0) {
                domainNote = 'Penyebut tidak mengandung x (c = 0), fungsi linear / konstanta.';
            } else {
                const av = -d / c;
                domainNote = `Domain: x ≠ ${fmt(av)}`;
            }
            let ah = 'Tidak terdefinisi (c = 0)';
            if (c !== 0) ah = `y = ${fmt(a / c)}`;
            const av = (c === 0) ? '—' : `x = ${fmt(-d / c)}`;
            out.innerHTML = `
                <p class="formula-display">f(x) = (${fmt(a)}x + ${fmt(b)}) / (${fmt(c)}x + ${fmt(d)})</p>
                <p>${domainNote}</p>
                <p>Asimtot Vertikal: ${av}</p>
                <p>Asimtot Horizontal: ${ah}</p>
                <p class="answer-highlight">AV: ${av}, AH: ${ah}</p>
            `;
        }

        function calcKomposisi() {
            const a = Number(document.getElementById('komp-a').value);
            const b = Number(document.getElementById('komp-b').value);
            const c = Number(document.getElementById('komp-c').value);
            const d = Number(document.getElementById('komp-d').value);
            const out = document.getElementById('result-komposisi');
            if (Number.isNaN(a) || Number.isNaN(b) || Number.isNaN(c) || Number.isNaN(d)) return;

            const A = a * c;
            const B = a * d + b;
            out.innerHTML = `
                <p>f(x) = ${fmt(a)}x + ${fmt(b)}</p>
                <p>g(x) = ${fmt(c)}x + ${fmt(d)}</p>
                <p class="formula-display">(f ∘ g)(x) = ${fmt(A)}x + ${fmt(B)}</p>
                <p class="answer-highlight">(f ∘ g)(x) = ${fmt(A)}x + ${fmt(B)}</p>
            `;
        }

        function calcKekontinuan() {
            const a = Number(document.getElementById('kont-a').value);
            const b = Number(document.getElementById('kont-b').value);
            const c = Number(document.getElementById('kont-c').value);
            const k = Number(document.getElementById('kont-k').value);
            const out = document.getElementById('result-kekontinuan');
            if (Number.isNaN(a) || Number.isNaN(b) || Number.isNaN(c) || Number.isNaN(k)) return;

            const val = a * k * k + b * k + c;
            out.innerHTML = `
                <p class="formula-display">f(x) = ${fmt(a)}x² + ${fmt(b)}x + ${fmt(c)}</p>
                <p>f(${fmt(k)}) = ${fmt(val)}</p>
                <p class="answer-highlight">Fungsi KONTINU di x = ${fmt(k)}</p>
            `;
        }

        function calcLimit() {
            const a = Number(document.getElementById('lim-a').value);
            const b = Number(document.getElementById('lim-b').value);
            const c = Number(document.getElementById('lim-c').value);
            const x = Number(document.getElementById('lim-x').value);
            const out = document.getElementById('result-limit');
            if (Number.isNaN(a) || Number.isNaN(b) || Number.isNaN(c) || Number.isNaN(x)) return;

            const val = a * x * x + b * x + c;
            out.innerHTML = `
                <p class="formula-display">lim(x→${fmt(x)}) (${fmt(a)}x² + ${fmt(b)}x + ${fmt(c)})</p>
                <p>Hasil substitusi: ${fmt(val)}</p>
                <p class="answer-highlight">Limit = ${fmt(val)}</p>
            `;
        }

        function calcTurunan() {
            const a = Number(document.getElementById('tur-a').value);
            const b = Number(document.getElementById('tur-b').value);
            const c = Number(document.getElementById('tur-c').value);
            const out = document.getElementById('result-turunan');
            if (Number.isNaN(a) || Number.isNaN(b) || Number.isNaN(c)) return;

            const A = 3 * a;
            const B = 2 * b;
            const C = c;
            out.innerHTML = `
                <p class="formula-display">f(x) = ${fmt(a)}x³ + ${fmt(b)}x² + ${fmt(c)}x + d</p>
                <p class="formula-display">f'(x) = ${fmt(A)}x² + ${fmt(B)}x + ${fmt(C)}</p>
                <p class="answer-highlight">f'(x) = ${fmt(A)}x² + ${fmt(B)}x + ${fmt(C)}</p>
            `;
        }

        function calcEkstrim() {
            const a = Number(document.getElementById('eks-a').value);
            const b = Number(document.getElementById('eks-b').value);
            const c = Number(document.getElementById('eks-c').value);
            const out = document.getElementById('result-ekstrim');
            if (Number.isNaN(a) || Number.isNaN(b) || Number.isNaN(c)) return;

            if (a === 0) {
                out.innerHTML = `<p class="answer-highlight">Bukan fungsi kuadrat (a = 0).</p>`;
                return;
            }
            const x0 = -b / (2 * a);
            const y0 = a * x0 * x0 + b * x0 + c;
            const second = 2 * a;
            const nature = second > 0 ? 'Minimum' : (second < 0 ? 'Maksimum' : 'Tidak pasti');
            out.innerHTML = `
                <p class="formula-display">f(x) = ${fmt(a)}x² + ${fmt(b)}x + ${fmt(c)}</p>
                <p>f'(x) = 2${fmt(a)}x + ${fmt(b)}</p>
                <p class="answer-highlight">${nature} di (${fmt(x0)}, ${fmt(y0)})</p>
            `;
        }

        function calcIntegralIndef() {
            const a = Number(document.getElementById('int-a').value);
            const b = Number(document.getElementById('int-b').value);
            const c = Number(document.getElementById('int-c').value);
            const out = document.getElementById('result-integral-indef');
            if (Number.isNaN(a) || Number.isNaN(b) || Number.isNaN(c)) return;

            const A = a / 3;
            const B = b / 2;
            out.innerHTML = `
                <p class="formula-display">∫(${fmt(a)}x² + ${fmt(b)}x + ${fmt(c)}) dx</p>
                <p>= ${fmt(A)}x³ + ${fmt(B)}x² + ${fmt(c)}x + C</p>
                <p class="answer-highlight">= ${fmt(A)}x³ + ${fmt(B)}x² + ${fmt(c)}x + C</p>
            `;
        }

        function calcIntegralDef() {
            const p = Number(document.getElementById('int-p').value);
            const q = Number(document.getElementById('int-q').value);
            const r = Number(document.getElementById('int-r').value);
            const a = Number(document.getElementById('int-lower').value);
            const b = Number(document.getElementById('int-upper').value);
            const out = document.getElementById('result-integral-def');
            if (Number.isNaN(p) || Number.isNaN(q) || Number.isNaN(r) || Number.isNaN(a) || Number.isNaN(b)) return;

            const F = x => (p * x * x * x) / 3 + (q * x * x) / 2 + r * x;
            const Fa = F(a);
            const Fb = F(b);
            const ans = Fb - Fa;
            out.innerHTML = `
                <p class="formula-display">∫${fmt(a)}→${fmt(b)} (${fmt(p)}x² + ${fmt(q)}x + ${fmt(r)}) dx</p>
                <p>= F(${fmt(b)}) - F(${fmt(a)}) = ${fmt(Fb)} - ${fmt(Fa)}</p>
                <p class="answer-highlight">= ${fmt(ans)}</p>
            `;
        }

        // Attach click handlers and input listeners so results update when user types
        // Mapping input ids for each calculator
        const map = {
            pert: ['pert-a','pert-b','pert-c'],
            grad: ['grad-x1','grad-y1','grad-x2','grad-y2'],
            graf: ['graf-a','graf-b','graf-c'],
            ras: ['ras-a','ras-b','ras-c','ras-d'],
            komp: ['komp-a','komp-b','komp-c','komp-d'],
            kont: ['kont-a','kont-b','kont-c','kont-k'],
            lim: ['lim-a','lim-b','lim-c','lim-x'],
            tur: ['tur-a','tur-b','tur-c'],
            eks: ['eks-a','eks-b','eks-c'],
            intl: ['int-a','int-b','int-c'],
            intd: ['int-p','int-q','int-r','int-lower','int-upper']
        };

        // Helpers to add listeners (input events only; buttons were removed)
        function addListeners(ids, handler) {
            ids.forEach(id => {
                const el = document.getElementById(id);
                if (el) el.addEventListener('input', handler);
            });
        }
        addListeners(map.pert, calcPertidaksamaan);
        addListeners(map.grad, calcGradien);
        addListeners(map.graf, calcGrafik);
        addListeners(map.ras, calcRasional);
        addListeners(map.komp, calcKomposisi);
        addListeners(map.kont, calcKekontinuan);
        addListeners(map.lim, calcLimit);
        addListeners(map.tur, calcTurunan);
        addListeners(map.eks, calcEkstrim);
        addListeners(map.intl, calcIntegralIndef);
        addListeners(map.intd, calcIntegralDef);

        // Run initial calculations once at load
        calcPertidaksamaan();
        calcGradien();
        calcGrafik();
        calcRasional();
        calcKomposisi();
        calcKekontinuan();
        calcLimit();
        calcTurunan();
        calcEkstrim();
        calcIntegralIndef();
        calcIntegralDef();
    </script>
</body>
</html>